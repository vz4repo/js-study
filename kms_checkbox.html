<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>CheckBox</title>
	</head>
	<body>
		<h1>Write Sports!</h1>
		<input type="checkbox" id="all" />
		<label for="">전체</label><br />
		<input type="checkbox" value="농구" class="choice" />
		<label for="">농구</label><br />
		<input type="checkbox" value="배구" class="choice" />
		<label for="">배구</label><br />
		<input type="checkbox" value="축구" class="choice" />
		<label for="">축구</label><br />
		<input type="checkbox" value="야구" class="choice" />
		<label for="">야구</label><br />

		<textarea name="" id="text" cols="30" rows="10"></textarea>
		<script>
			let inputs = document.querySelectorAll('.choice'); // choice클래스의 input태그목록 선택
			let all = document.querySelector('#all'); // '전체' input 태그 선택

			// 1. '전체 선택' input 태그에 이벤트 걸기
			all.addEventListener('click', function () {
				const isChecked = all.checked; // checked인지 확인
				tmp = []; // input.value를 집어 넣을 배열 생성
				if (isChecked) {
					// checked이면
					for (input of inputs) {
						// 각 input태그를 순회하면서
						input.checked = true; // check 상태로 변경
						tmp.push(input.value); // tmp 배열에 input.value 저장
					}
				} else {
					for (input of inputs) {
						input.checked = false; // check 상태가 아닐 경우
						tmp.pop(input.value); // tmp 배열 내용 삭제
					}
				}
				text.innerText = tmp.join(' '); // textarea에 tmp 저장
			});

			// 2. 나머지 input 태그에 이벤트 걸기
			for (let input of inputs) {
				tmp = [];
				input.addEventListener('click', function () {
					const isChecked = input.checked;

					if (isChecked) {
						// check 될 경우 배열에 input.value 저장
						tmp.push(input.value);
					} else {
						let index = tmp.indexOf(input.value); // check를 해제할 경우, input.value의 인덱스를 구해서
						tmp.splice(index, 1); // splice로 제거
					}
					text.innerText = tmp.join(' ');
				});
			}
		</script>
	</body>
</html>
